# PCB-Sim MVC Refactor

A small command-line application that simulates printed-circuit-board (PCB) assembly runs, persists every run in SQLite, and lets you list or reprint past results.
The codebase demonstrates a clean MVC split and two classic OO patterns (Strategy and Factory).

## Features

* Interactive CLI

  * Run a simulation for any board type and quantity
  * List all historical runs from the database
  * View a formatted report for any run ID
* SQLite persistence through a lightweight DAO (no ORM)
* Strategy pattern for board-specific defect probabilities
* Factory pattern for creating the concrete Strategy
* Pure Java 8/11 (no modules) and no external build system required

## Project layout

```
pcb-sim-mvc/
├─ lib/                       third-party jars
│  ├─ sqlite-jdbc-3.45.0.0.jar
│  ├─ slf4j-api-2.0.13.jar
│  └─ slf4j-nop-2.0.13.jar
├─ run_all.sh                 compile-and-run helper
├─ out/                       javac output (autogenerated)
└─ src/
   └─ main/
      └─ java/
         └─ com/example/pcb/
            MainApp.java
            controller/
            model/
            view/
```

## Quick start

1. Clone or copy the repo.
2. Download the three jars above into `lib/` (script shows exact URLs).
3. Make the script executable.

```bash
chmod +x run_all.sh
./run_all.sh
```

The menu appears:

```
--- Main Menu ---
1) Run simulation
2) List past runs
3) View run report
q) Quit
> _
```

The first run creates `sim_runs.db` (a 1-file SQLite database) in the project root.

## How it works

* Model

  * `Simulation` contains all production-line logic.
  * `PCBType` interface plus three concrete boards implement the Strategy.
  * `PCBFactory` gives you the correct board strategy for a chosen type.
  * `SQLiteRunRepository` saves JSON payloads and returns summaries.

* View

  * `CliViews` handles all terminal I/O.
  * `ReportFormatter` turns JSON maps into the tabular report.

* Controller

  * `MainController` drives the menu loop and mediates between view and model.

## Building without the script

You can compile with plain `javac`:

```bash
javac -cp "lib/*" -d out $(find src/main/java -name '*.java')
java  -cp "lib/*:out" com.example.pcb.MainApp
```

Or drop the source tree into a Maven/Gradle project; the code uses only standard Java SE APIs plus SQLite and SLF4J.

## Tested JDKs

* OpenJDK 11
* Eclipse Temurin 17

No changes are needed for newer versions; if you have JDK 16+ you may revert `RunSummary` back to a Java record.